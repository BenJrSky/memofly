{"remainingRequest":"/Users/ben/Desktop/BEN/WORKS/FLYIP/VUE/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ben/Desktop/BEN/WORKS/FLYIP/VUE/src/components/MessageTemplateWizard.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/ben/Desktop/BEN/WORKS/FLYIP/VUE/src/components/MessageTemplateWizard.vue","mtime":1632248241600},{"path":"/Users/ben/Desktop/BEN/WORKS/FLYIP/VUE/node_modules/cache-loader/dist/cjs.js","mtime":1632248233346},{"path":"/Users/ben/Desktop/BEN/WORKS/FLYIP/VUE/node_modules/babel-loader/lib/index.js","mtime":1632248232528},{"path":"/Users/ben/Desktop/BEN/WORKS/FLYIP/VUE/node_modules/ts-loader/index.js","mtime":1632248240050},{"path":"/Users/ben/Desktop/BEN/WORKS/FLYIP/VUE/node_modules/cache-loader/dist/cjs.js","mtime":1632248233346},{"path":"/Users/ben/Desktop/BEN/WORKS/FLYIP/VUE/node_modules/vue-loader/lib/index.js","mtime":1632248240770}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKaW1wb3J0IHtDb21wb25lbnQsIFByb3AsIFZ1ZX0gZnJvbSAndnVlLXByb3BlcnR5LWRlY29yYXRvcic7CmltcG9ydCB7IE1lc3NhZ2UsIFNlcnZpY2UgfSBmcm9tICcuLy4uL3NjaGVtYS9jbGFzc2VzLmpzJwppbXBvcnQge1BPU1RTZXJ2aWNlfSBmcm9tICIuLi9tZW1vRmx5LWFwaS9QT1NUU2VydmljZS5qcyI7CmltcG9ydCB7UFVUU2VydmljZX0gZnJvbSAiLi4vbWVtb0ZseS1hcGkvUFVUU2VydmljZS5qcyI7CmltcG9ydCB7R0VUU2VydmljZXN9IGZyb20gIi4uL21lbW9GbHktYXBpL0dFVFNlcnZpY2VzLmpzIjsKaW1wb3J0IHtHRVRNZXNzYWdlfSBmcm9tICIuLi9tZW1vRmx5LWFwaS9HRVRNZXNzYWdlLmpzIjsKaW1wb3J0IHtUb2FzdH0gZnJvbSAiLi4vc2VydmljZXMvVG9hc3QuanMiOwoKQENvbXBvbmVudCh7CiAgY29tcG9uZW50czogewogIH0sCn0pCgoKZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWVzc2FnZVRlbXBsYXRlV2l6YXJkIGV4dGVuZHMgVnVlIHsKCiAgcHVibGljIG1lc3NhZ2U6IGFueSA9IG5ldyBNZXNzYWdlOwogIHB1YmxpYyBkYXRhU2VydmljZXM6IGFueTsKICBwdWJsaWMgc2VydmljZXM6IGFueTsKICBwdWJsaWMgbWVzc2FnZVByZXZpZXc6IGFueTsKICBwdWJsaWMgc2VydmljZTogYW55ID0gbmV3IFNlcnZpY2UoKTsKICBwdWJsaWMgZGlzYWJsZWQ6IGFueSA9IHRydWU7CgogIGRhdGEoKSB7CgogICAgdGhpcy5tZXNzYWdlID0gbmV3IE1lc3NhZ2U7CgogICAgcmV0dXJuIHsKICAgICAgbWVzc2FnZTogdGhpcy5tZXNzYWdlLAogICAgICBzZXJ2aWNlczogdGhpcy5zZXJ2aWNlcywKICAgICAgc2VydmljZTogdGhpcy5zZXJ2aWNlLAogICAgICBtZXNzYWdlUHJldmlldzogdGhpcy5tZXNzYWdlUHJldmlldywKICAgICAgZGF0YVNlcnZpY2VzOiB0aGlzLmRhdGFTZXJ2aWNlcywKICAgICAgZGlzYWJsZWQ6IHRoaXMuZGlzYWJsZWQKICAgIH0KCiAgfQoKICBtb3VudGVkKCkgewoKICAgIHRoaXMuZGlzYWJsZWQgPSB0cnVlOwoKICAgIEdFVFNlcnZpY2VzKCkKICAgICAgICAudGhlbigocmVzcDogYW55KSA9PiB7CiAgICAgICAgcmV0dXJuIHRoaXMuc2VydmljZXMgPSByZXNwLmRhdGE7CiAgICB9KQoKICAgICAgIGlmICh0aGlzLiRyb3V0ZS5wYXJhbXMuaWQpIHsKCiAgICAgICAgICAgIGxldCBtZXNzYWdlSUQgPSB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQ7CgogICAgICAgICAgICBHRVRNZXNzYWdlKG1lc3NhZ2VJRCkKICAgICAgICAgICAgICAgIC50aGVuKChyZXNwb25zZTogYW55KSA9PiB7CiAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT0gMjAwKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubWVzc2FnZSA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubWVzc2FnZSA9IG5ldyBNZXNzYWdlKCk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CgoKICAgICAgICB9CiAgICAKCgogIH0KCiAgc2F2ZShzZXJ2aWNlOiBhbnkpIHsKICAgIHRoaXMucHJvY2VzcyhzZXJ2aWNlKQogICAgICAgIC50aGVuKChzZXJ2aWNlRGF0YTogYW55KSA9PiB7CgogICAgICAgICAgaWYgKHRoaXMuJHJvdXRlLnBhcmFtcy5pZCkgewoKICAgICAgICAgICAgUE9TVFNlcnZpY2Uoc2VydmljZURhdGEpCiAgICAgICAgICAgICAgICAudGhlbigoZGF0YTogYW55KSA9PiB7CiAgICAgICAgICAgICAgICAgIFRvYXN0KGRhdGEsIHtzdWNjZXNzOiAiU2Vydml6aW8gc2FsdmF0byBjb24gc3VjY2Vzc28hIiwgZXJyb3I6ICJFcnJvcmUgZHVyYW50ZSBpbCBzYWx2YXRhZ2dpbyJ9KTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLmhyZWYgPSAnL3NlcnZpY2VzJzsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgIH0gZWxzZSB7CgogICAgICAgICAgICBQVVRTZXJ2aWNlKHNlcnZpY2VEYXRhKQogICAgICAgICAgICAgICAgLnRoZW4oKGRhdGE6IGFueSkgPT4gewogICAgICAgICAgICAgICAgICBUb2FzdChkYXRhLCB7c3VjY2VzczogIlNlcnZpemlvIHNhbHZhdG8gY29uIHN1Y2Nlc3NvISIsIGVycm9yOiAiRXJyb3JlIGR1cmFudGUgaWwgc2FsdmF0YWdnaW8ifSk7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgICAgICBsb2NhdGlvbi5ocmVmID0gJy9zZXJ2aWNlcyc7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goZXJyID0+IHsKICAgICAgICAgIFRvYXN0KGVycik7CiAgICAgICAgfSkKCgogIH0KCiAgcHJvY2VzcyhzZXJ2aWNlOiBhbnkpIHsKCiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHsKCiAgICAgIHNlcnZpY2UgPSB0aGlzLmFycmFuZ2VGb3JEQihzZXJ2aWNlKTsKCiAgICAgIGxldCBjb2xsYWJvcmF0b3JpOiBhbnk7CiAgICAgIGNvbGxhYm9yYXRvcmkgPSBbXTsKCiAgICAgIHNlcnZpY2UuY29sbGFib3JhdG9yaSA9IGNvbGxhYm9yYXRvcmkuam9pbigifCIpOwoKICAgICAgcmVzb2x2ZShzZXJ2aWNlKTsKCiAgICB9KQoKCiAgfQoKICBhcnJhbmdlRm9yREIoc2VydmljZTogYW55KSB7CiAgICBpZiAoc2VydmljZS5wcmVub3RhYmlsZVZpYVdlYiA9PSB0cnVlKSB7CiAgICAgIHNlcnZpY2UucHJlbm90YWJpbGVWaWFXZWIgPSAib24iOwogICAgfQogICAgaWYgKHNlcnZpY2UucHJlbm90YWJpbGVWaWFXZWIgPT0gZmFsc2UpIHsKICAgICAgc2VydmljZS5wcmVub3RhYmlsZVZpYVdlYiA9ICJvZmYiOwogICAgfQoKICAgIHJldHVybiBzZXJ2aWNlOwoKICB9CgogIHNhdmVNZXNzYWdlKCkgewoKICAgIGxldCBzY2hlbWEgPSB7CiAgICAgIG5vbWU6IHRydWUsCiAgICAgIGR1cmF0YTogdHJ1ZSwKICAgICAgY29sb3JlOiB0cnVlLAogICAgICBkZXNjcml6aW9uZTogdHJ1ZSwKICAgICAgcHJlbm90YWJpbGVWaWFXZWI6IHRydWUsCiAgICAgIHBhdXNhOiB0cnVlLAogICAgICBwcmV6em86IHRydWUKICAgIH0KCiAgICAvLyB0aGlzLnNlcnZpY2UudGFncyA9IHRoaXMuc2VydmljZS50YWdzLnNwbGl0KCcgJyk7CgogICAgLy8gbGV0IHJlc3BvbnNlID0gQ2hlY2soc2NoZW1hLCB0aGlzLnNlcnZpY2UpOwoKICAgIC8vIGlmIChyZXNwb25zZSkgewoKICAgIC8vICAgdGhpcy5zYXZlKHRoaXMuc2VydmljZSk7CgogICAgLy8gfSBlbHNlIHsKICAgIC8vICAgVG9hc3Qoe2Vycm9yOiAiRGF0aSBpbmNvbXBsZXRpIn0pOwogICAgLy8gfQoKCiAgfQoKICBzZW5kTWVzc2FnZSgpIHsKCiAgfQoKICBjYW5jZWxNZXNzYWdlKCkgewoKICB9CgogIGFycmFuZ2VGb3JGcm9uRW5kKHNlcnZpY2U6IGFueSkgewoKICAgIGlmIChzZXJ2aWNlLnByZW5vdGFiaWxlVmlhV2ViID09ICJvbiIpIHsKICAgICAgc2VydmljZS5wcmVub3RhYmlsZVZpYVdlYiA9IHRydWU7CiAgICB9IGVsc2UgewogICAgICBzZXJ2aWNlLnByZW5vdGFiaWxlVmlhV2ViID0gZmFsc2U7CiAgICB9CgogICAgcmV0dXJuIHNlcnZpY2U7CgogIH0KCn0K"},{"version":3,"sources":["MessageTemplateWizard.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2EA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;;;AAIA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;;AAGA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA","file":"MessageTemplateWizard.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"row\">\n    <div class=\"card col-12\">\n      <div class=\"card-body row col-12\">\n        <div class=\"col-sm-12 col-md-6\">\n          <div class=\"form-group\">\n            <h4 class=\"mt-0 titolo-label size-14\">Tipo promemoria</h4>\n            <select class=\"form-control size-14\" id=\"breakService\" v-model=\"message.tipo\">\n                <option class=\"font-poppins weight-500 size-14\" value=\"pre\">Pre appuntamento</option>\n                <option class=\"font-poppins weight-500 size-14\" value=\"post\">Post appuntamento</option>\n             </select>\n            <small class=\"form-text text-muted size-12\">Inserisci che tipologia di messaggio vuoi creare</small>\n          </div>\n          <div class=\"form-group\">\n            <h4 class=\"mt-0 titolo-label size-14\">Servizio</h4>\n            <select class=\"form-control size-14\" id=\"breakService\" v-model=\"message.servizio\">\n                <option class=\"font-poppins weight-500 size-14\" v-for=\"service in services\" v-bind:key=\"service\" v:bind:value=\"service.id\">{{ service.nome }} </option>\n             </select>            \n             <small class=\"form-text text-muted size-12\">Seleziona la tipologia del servizio per cui stai creando il messaggio</small>\n          </div>\n          <div class=\"form-group\">\n            <h4 class=\"mt-0 titolo-label size-14\">Quando inviare</h4>\n            <select class=\"form-control size-14\" id=\"breakService\" v-model=\"message.quando\">\n              <option class=\"size-14\" v-for=\" n in 24\" v-bind:key=\"n\" v-bind:value=\"'-'+n+'h'\">{{ \"n.\" + n + \" ore prima dell'appuntamento\" }}</option>\n              <option class=\"size-14\" v-for=\" n in 24\" v-bind:key=\"n\" v-bind:value=\"'+'+n+'h'\">{{ \"n.\" + n + \" ore dopo dell'appuntamento\" }}</option>\n            </select>            \n             <small class=\"form-text text-muted size-12\">Seleziona quando dovrà essere inviato il messaggio</small>\n          </div>\n          <div class=\"form-group\">\n            <div class=\"row col-12\">\n                <input class=\"prenotabileViaWebCheckbox mt-1\" type=\"checkbox\" id=\"webBookingService\" v-model=\"message.fidelizzazione\">\n                <label class=\" titolo-label size-14\" for=\"webBookingService\">Fidelizzazione intelligente</label>\n            </div>\n            <small class=\"form-text text-muted size-12\">Testo fidelizzazione intelligente</small>\n          </div>\n        </div>\n        <div class=\"col-sm-12 col-md-6\">\n            <div class=\"form-group\">\n                <h4 class=\"mt-0 mb-0 titolo-label size-14\">Esempio anteprima messaggi</h4>\n                <small class=\"form-text text-muted size-12 mt-0\">Verrà creata un’anteprima del messaggio che riceverà il cliente</small>\n                <div class=\"row col-12\">\n                    <textarea class=\"form-control resize-no p-2 weight-500 size-14 col-12\" rows=\"3\" id=\"defaultTitleMessage\" v-model=\"messagePreview\"  spellcheck=\"false\"></textarea>\n                </div>\n            </div>    \n             <div class=\"form-group\">\n                <h4 class=\"mt-0 titolo-label size-14\">Descrizione</h4>\n                <div class=\"row col-12\">\n                    <textarea class=\"form-control resize-no p-2 weight-500 size-14 col-12\" rows=\"3\" id=\"defaultTitleMessage\" v-model=\"message.testo\"  spellcheck=\"false\"></textarea>\n                </div>\n                <small class=\"form-text text-muted size-12 mt-0 mb-0\">Crea il testo del messaggio utilizzando i campi che visualizzi sotto il box</small>\n            </div>       \n        </div>\n        <div class=\"col-12\">\n             <div class=\"float-right m-4\">\n                 <button type=\"submit\" v-bind:disabled=\"disabled\" v-on:click=\"sendMessage()\"\n                        class=\"btn btn-gradient-success mr-2 size-16\">Invia SMS di prova\n                </button>\n                <button type=\"submit\" v-bind:disabled=\"disabled\" v-on:click=\"saveMessage()\"\n                        class=\"btn btn-gradient-primary mr-2 size-16\">Salva\n                </button>\n                <button type=\"button\" v-bind:disabled=\"disabled\" v-on:click=\"cancelMessage()\"\n                        class=\"btn btn-gradient-danger size-16\">Annulla\n                </button>\n            </div>\n        </div>\n        \n\n\n\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport {Component, Prop, Vue} from 'vue-property-decorator';\nimport { Message, Service } from './../schema/classes.js'\nimport {POSTService} from \"../memoFly-api/POSTService.js\";\nimport {PUTService} from \"../memoFly-api/PUTService.js\";\nimport {GETServices} from \"../memoFly-api/GETServices.js\";\nimport {GETMessage} from \"../memoFly-api/GETMessage.js\";\nimport {Toast} from \"../services/Toast.js\";\n\n@Component({\n  components: {\n  },\n})\n\n\nexport default class MessageTemplateWizard extends Vue {\n\n  public message: any = new Message;\n  public dataServices: any;\n  public services: any;\n  public messagePreview: any;\n  public service: any = new Service();\n  public disabled: any = true;\n\n  data() {\n\n    this.message = new Message;\n\n    return {\n      message: this.message,\n      services: this.services,\n      service: this.service,\n      messagePreview: this.messagePreview,\n      dataServices: this.dataServices,\n      disabled: this.disabled\n    }\n\n  }\n\n  mounted() {\n\n    this.disabled = true;\n\n    GETServices()\n        .then((resp: any) => {\n        return this.services = resp.data;\n    })\n\n       if (this.$route.params.id) {\n\n            let messageID = this.$route.params.id;\n\n            GETMessage(messageID)\n                .then((response: any) => {\n                  if (response.status == 200) {\n                    return this.message = response.data;\n                  } else {\n                    return this.message = new Message();\n                  }\n            });\n\n\n        }\n    \n\n\n  }\n\n  save(service: any) {\n    this.process(service)\n        .then((serviceData: any) => {\n\n          if (this.$route.params.id) {\n\n            POSTService(serviceData)\n                .then((data: any) => {\n                  Toast(data, {success: \"Servizio salvato con successo!\", error: \"Errore durante il salvataggio\"});\n                })\n                .then(() => {\n                  location.href = '/services';\n                });\n\n          } else {\n\n            PUTService(serviceData)\n                .then((data: any) => {\n                  Toast(data, {success: \"Servizio salvato con successo!\", error: \"Errore durante il salvataggio\"});\n                })\n                .then(() => {\n                  location.href = '/services';\n                });\n\n          }\n        })\n        .catch(err => {\n          Toast(err);\n        })\n\n\n  }\n\n  process(service: any) {\n\n    return new Promise((resolve) => {\n\n      service = this.arrangeForDB(service);\n\n      let collaboratori: any;\n      collaboratori = [];\n\n      service.collaboratori = collaboratori.join(\"|\");\n\n      resolve(service);\n\n    })\n\n\n  }\n\n  arrangeForDB(service: any) {\n    if (service.prenotabileViaWeb == true) {\n      service.prenotabileViaWeb = \"on\";\n    }\n    if (service.prenotabileViaWeb == false) {\n      service.prenotabileViaWeb = \"off\";\n    }\n\n    return service;\n\n  }\n\n  saveMessage() {\n\n    let schema = {\n      nome: true,\n      durata: true,\n      colore: true,\n      descrizione: true,\n      prenotabileViaWeb: true,\n      pausa: true,\n      prezzo: true\n    }\n\n    // this.service.tags = this.service.tags.split(' ');\n\n    // let response = Check(schema, this.service);\n\n    // if (response) {\n\n    //   this.save(this.service);\n\n    // } else {\n    //   Toast({error: \"Dati incompleti\"});\n    // }\n\n\n  }\n\n  sendMessage() {\n\n  }\n\n  cancelMessage() {\n\n  }\n\n  arrangeForFronEnd(service: any) {\n\n    if (service.prenotabileViaWeb == \"on\") {\n      service.prenotabileViaWeb = true;\n    } else {\n      service.prenotabileViaWeb = false;\n    }\n\n    return service;\n\n  }\n\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped lang=\"scss\">\n\n.prenotabileViaWebCheckbox{\n  appearance: none;\n  -webkit-appearance: none;\n  height: 15px;\n  width: 30px;\n  background-color: #d6d6d6;\n  border-radius: 11px;\n  cursor: pointer;\n  margin-right: 10px;\n  display: flex;\n  align-items: center;\n  justify-content: left;\n  padding-left: 3px;\n  color: #666;\n  border: 0px solid #7d839a;\n}\n.prenotabileViaWebCheckbox:after{\n  font-family: \"Font Awesome 5 Free\";\n  font-weight: 900;\n  content: \"\\f111\";\n  font-size: 10px;\n  color: #fff;\n}\n.prenotabileViaWebCheckbox:hover{\n  background-color: #666;\n  border: 0px solid #7d839a;\n}\n.prenotabileViaWebCheckbox:checked{\n  background-color: #439AF4;\n  border: 0px solid #7d839a;\n}\n.prenotabileViaWebCheckbox:checked:after{\n  display: flex;\n  padding-left: 13px;\n}   \n\n\n</style>\n"]}]}