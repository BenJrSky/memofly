{"remainingRequest":"/Users/ben/Desktop/BEN/WORKS/FLYIP/VUE/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ben/Desktop/BEN/WORKS/FLYIP/VUE/src/components/AppointmentsTable.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/ben/Desktop/BEN/WORKS/FLYIP/VUE/src/components/AppointmentsTable.vue","mtime":1627419836776},{"path":"/Users/ben/Desktop/BEN/WORKS/FLYIP/VUE/node_modules/cache-loader/dist/cjs.js","mtime":1630067776591},{"path":"/Users/ben/Desktop/BEN/WORKS/FLYIP/VUE/node_modules/babel-loader/lib/index.js","mtime":1630067775262},{"path":"/Users/ben/Desktop/BEN/WORKS/FLYIP/VUE/node_modules/ts-loader/index.js","mtime":1630067785662},{"path":"/Users/ben/Desktop/BEN/WORKS/FLYIP/VUE/node_modules/cache-loader/dist/cjs.js","mtime":1630067776591},{"path":"/Users/ben/Desktop/BEN/WORKS/FLYIP/VUE/node_modules/vue-loader/lib/index.js","mtime":1630067786533}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKaW1wb3J0IHsgQ29tcG9uZW50LCBQcm9wLCBWdWUgfSBmcm9tICd2dWUtcHJvcGVydHktZGVjb3JhdG9yJzsKaW1wb3J0IEZ1bGxDYWxlbmRhciBmcm9tICdAZnVsbGNhbGVuZGFyL3Z1ZSc7CmltcG9ydCBkYXlHcmlkUGx1Z2luIGZyb20gJ0BmdWxsY2FsZW5kYXIvZGF5Z3JpZCc7CmltcG9ydCB0aW1lR3JpZFBsdWdpbiBmcm9tICdAZnVsbGNhbGVuZGFyL3RpbWVncmlkJzsKaW1wb3J0IGl0TG9jYWxlIGZyb20gIkBmdWxsY2FsZW5kYXIvY29yZS9sb2NhbGVzL2l0IjsKaW1wb3J0IGludGVyYWN0aW9uUGx1Z2luIGZyb20gJ0BmdWxsY2FsZW5kYXIvaW50ZXJhY3Rpb24nOwppbXBvcnQgeyBHRVRBcHBvaW50bWVudHMgfSBmcm9tICIuLi9tZW1vRmx5LWFwaS9HRVRBcHBvaW50bWVudHMuanMiOwppbXBvcnQgUGFnaW5hdGlvbiBmcm9tICcuL2NvbW1vbi9QYWdpbmF0aW9uLnZ1ZSc7CmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JzsKaW1wb3J0IHsgVG9hc3QgfSBmcm9tICIuLi9zZXJ2aWNlcy9Ub2FzdC5qcyI7CgoKQENvbXBvbmVudCh7CiAgY29tcG9uZW50czogewogICAgUGFnaW5hdGlvbiwKICAgIEZ1bGxDYWxlbmRhcgogIH0sCn0pCgpleHBvcnQgZGVmYXVsdCBjbGFzcyBBcHBvaW50bWVudHNUYWJsZSBleHRlbmRzIFZ1ZSB7CiAgCiAgICBwdWJsaWMgYXBwb2ludG1lbnRzIDphbnk7CiAgICBwdWJsaWMgZGF0YUFwcG9pbnRtZW50cyA6YW55OwogICAgcHVibGljIGNhbGVuZGFyT3B0aW9ucyA6YW55OwogICAgcHVibGljIGV2ZW50cyA6YW55OwoKICAgIHByb2Nlc3MoYXBwb2ludG1lbnRzOmFueSl7CgogICAgICAgIHJldHVybiBhcHBvaW50bWVudHMubWFwKChhcHBvaW50bWVudDphbnkpPT57CgogICAgICAgICAgICAgICAgbGV0IGNsaWVudGUgPSB7CiAgICAgICAgICAgICAgICAgICAgZnVsbmFtZToiIiwKICAgICAgICAgICAgICAgICAgICBwaG9uZToiIgogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBpZihhcHBvaW50bWVudC5jbGllbnRlLm5hbWUpewogICAgICAgICAgICAgICAgICAgIGNsaWVudGUuZnVsbmFtZSA9IGFwcG9pbnRtZW50LmNsaWVudGUubmFtZSArICIgIisgYXBwb2ludG1lbnQuY2xpZW50ZS5sYXN0bmFtZTsKICAgICAgICAgICAgICAgICAgICBjbGllbnRlLnBob25lID0gYXBwb2ludG1lbnQuY2xpZW50ZS5waG9uZTsKICAgICAgICAgICAgICAgIH1lbHNleyAKICAgICAgICAgICAgICAgICAgICBjbGllbnRlLmZ1bG5hbWUgPSBhcHBvaW50bWVudC5jbGllbnRlOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGxldCBvcmEgPSBtb21lbnQoYXBwb2ludG1lbnQuaW5pemlvKS5mb3JtYXQoImhoOm1tIik7CgogICAgICAgICAgICAgICAgcmV0dXJuIHsgCgogICAgICAgICAgICAgICAgICAgIGlkOiBhcHBvaW50bWVudC5pZCwKICAgICAgICAgICAgICAgICAgICBzZXJ2aXppbzogYXBwb2ludG1lbnQuc2Vydml6aW8sCiAgICAgICAgICAgICAgICAgICAgb3JhOiBvcmEsCiAgICAgICAgICAgICAgICAgICAgc3RhcnQ6IGFwcG9pbnRtZW50LmluaXppbywKICAgICAgICAgICAgICAgICAgICBkdXJhdGE6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgY29sbGFib3JhdG9yZTogbnVsbCwKICAgICAgICAgICAgICAgICAgICBjbGllbnRlOiBjbGllbnRlLAogICAgICAgICAgICAgICAgICAgIHByZW5vdGF0b1ZpYVdlYjogYXBwb2ludG1lbnQucHJlbm90YXRvVmlhV2ViCgogICAgICAgICAgICAgICAgfQoKICAgICAgICB9KQogICAgICAgIAogICAgfQoKICAgIGNhbGVuZGFyRXZlbnRzKGFwcG9pbnRtZW50czphbnkpewoKICAgICAgICByZXR1cm4gYXBwb2ludG1lbnRzLm1hcCgoYXBwb2ludG1lbnQ6YW55KT0+ewoKICAgICAgICAgICAgbGV0IHRpdGxlID0gYXBwb2ludG1lbnQuc2Vydml6aW87CgogICAgICAgICAgICBpZihhcHBvaW50bWVudC5jbGllbnRlLm5hbWUpewogICAgICAgICAgICAgICAgICAgIHRpdGxlICs9ICIgLSAiICsgYXBwb2ludG1lbnQuY2xpZW50ZS5uYW1lICsgIiAiKyBhcHBvaW50bWVudC5jbGllbnRlLmxhc3RuYW1lOwogICAgICAgICAgICB9ZWxzZXsgCiAgICAgICAgICAgICAgICB0aXRsZSArPSAgYXBwb2ludG1lbnQuY2xpZW50ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIHsgCiAgICAgICAgICAgICAgICB0aXRsZTogdGl0bGUsIAogICAgICAgICAgICAgICAgc3RhcnQ6YXBwb2ludG1lbnQuaW5pemlvCiAgICAgICAgICAgIH0KCiAgICAgICAgfSk7CgogICAgfQoKICAgIGRhdGEoKSB7CgogICAgICAgICBHRVRBcHBvaW50bWVudHMoKQogICAgICAgICAgICAudGhlbigoYXBwb2ludG1lbnRzRGF0YTphbnkpPT57CiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50cyA9IHRoaXMuY2FsZW5kYXJFdmVudHMoYXBwb2ludG1lbnRzRGF0YSk7CiAgICAgICAgICAgICAgICB0aGlzLmNhbGVuZGFyT3B0aW9ucy5ldmVudHMgPSB0aGlzLmV2ZW50czsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJFVkVOVFMiKQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkodGhpcy5ldmVudHMpKTsKICAgICAgICAgICAgICAgIHRoaXMuYXBwb2ludG1lbnRzID0gdGhpcy5wcm9jZXNzKGFwcG9pbnRtZW50c0RhdGEpOwogICAgICAgICAgICAgICAgdGhpcy4kcm9vdC4kZW1pdCgnZGF0YUFwaScsdGhpcy5hcHBvaW50bWVudHMpOwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXBwb2ludG1lbnRzCiAgICAgICAgIH0pCgogICAgICAgIC8vZGF5R3JpZFdlZWsnLCAndGltZUdyaWREYXknLCAnbGlzdFdlZWsnIAoKICAgICAgICB0aGlzLmNhbGVuZGFyT3B0aW9ucyA9IHsKICAgICAgICAgICAgcGx1Z2luczogWyB0aW1lR3JpZFBsdWdpbiwgZGF5R3JpZFBsdWdpbiwgaW50ZXJhY3Rpb25QbHVnaW4gXSwKICAgICAgICAgICAgbG9jYWxlOml0TG9jYWxlLAogICAgICAgICAgICBpbml0aWFsVmlldzogJ3RpbWVHcmlkRGF5JywKICAgICAgICAgICAgZGF0ZUNsaWNrOiB0aGlzLmhhbmRsZURhdGVDbGljaywKICAgICAgICAgICAgc2xvdE1pblRpbWU6ICIwOTowMDowMCIsCiAgICAgICAgICAgIHNsb3RNYXhUaW1lOiAiMTk6MDA6MDAiLAogICAgICAgICAgICBldmVudFRpbWVGb3JtYXQ6IHsKICAgICAgICAgICAgICAgIGhvdXI6ICdudW1lcmljJywKICAgICAgICAgICAgICAgIG1pbnV0ZTogJzItZGlnaXQnLAogICAgICAgICAgICAgICAgaG91cjEyOiBmYWxzZQogICAgICAgICAgICB9LAogICAgICAgICAgICBzbG90TGFiZWxGb3JtYXQ6IHsKICAgICAgICAgICAgICAgIGhvdXI6ICcyLWRpZ2l0JywKICAgICAgICAgICAgICAgIG1pbnV0ZTogJzItZGlnaXQnLAogICAgICAgICAgICAgICAgbWVyaWRpZW06IGZhbHNlLAogICAgICAgICAgICAgICAgaG91cjEyOiBmYWxzZSAKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZXZlbnRzOiB0aGlzLmV2ZW50cwogICAgICAgIH0sCgoKICAgICAgICB0aGlzLiRyb290LiRvbignZGF0YU91dHB1dCcsIChkYXRhOmFueSkgPT4gewogICAgICAgICAgICB0aGlzLmRhdGFBcHBvaW50bWVudHMgPSBkYXRhOwogICAgICAgIH0pOwogICAgICAgIAogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGNhbGVuZGFyT3B0aW9uczogdGhpcy5jYWxlbmRhck9wdGlvbnMsCiAgICAgICAgICAgIGV2ZW50czogdGhpcy5ldmVudHMsCiAgICAgICAgICAgIGFwcG9pbnRtZW50czogdGhpcy5hcHBvaW50bWVudHMsCiAgICAgICAgICAgIGRhdGFBcHBvaW50bWVudHM6dGhpcy5kYXRhQXBwb2ludG1lbnRzCiAgICAgICAgfQoKICAgICAgICAKICAgICAgICAKICAgIH0KICAgIAoKICAgIGhhbmRsZURhdGVDbGljayhhcmc6YW55KSB7CiAgICAgICAgYWxlcnQoJ2RhdGUgY2xpY2shICcgKyBKU09OLnN0cmluZ2lmeShhcmcpKQogICAgfQoKCn0K"},{"version":3,"sources":["AppointmentsTable.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;;;AAGA;AACA;AACA;;;AAGA","file":"AppointmentsTable.vue","sourceRoot":"src/components","sourcesContent":["<template>\n\n  <div class=\"row\">\n\n        <div class=\"col-12\">\n          <div class=\"card\">\n              <div class=\"card-body\">\n                  <h4 class=\"header-title mt-0 mb-3\"></h4>\n                  <FullCalendar v-bind:options=\"calendarOptions\" v-bind:events=\"events\"/>\n              </div>\n          </div>\n        </div>\n\n      <div class=\"col-12\">\n          <div class=\"card\">\n              <div class=\"card-body\">\n                  <h4 class=\"header-title mt-0 mb-3\"></h4>\n                  <div class=\"table-responsive browser_users\">\n                      <table class=\"table mb-0\">\n                          <thead class=\"thead-light\">\n                              <tr>\n                                  <th class=\"border-top-0\">Appuntamento</th>\n                                  <th class=\"border-top-0\">Ora</th>\n                                  <th class=\"border-top-0\">Durata</th>\n                                  <th class=\"border-top-0\">Collaboratore</th>\n                                  <th class=\"border-top-0\">Cliente</th>\n                                  <th class=\"border-top-0\">Numero di telefono</th>\n                                  <th class=\"border-top-0\">Prenotabile via web</th>\n                                  <th></th>\n                              </tr>\n                          </thead>\n                          <tbody>\n                             <tr v-for=\"appointment in dataAppointments\" :key=\"appointment\">   \n                                  <td><i class=\"mdi mdi-circle-slice-8 mr-2 text-warning font-16\"></i>{{ appointment.servizio }}</td>\n                                  <td>{{ appointment.ora }}</td>  \n                                  <td>{{ appointment.durata }}</td>   \n                                  <td>{{ appointment.collaboratore }}</td>                          \n                                  <td>{{ appointment.cliente.fullName }}</td> \n                                  <td>{{ appointment.cliente.phone }}</td>   \n\n                                  <td v-if=\"appointment.prenotabileViaWeb=='on'\" class=\"text-center\"><i class=\"mdi mdi-check-circle text-success font-22\"></i></td>   \n                                  <td v-if=\"appointment.prenotabileViaWeb!=='on'\" class=\"text-center\" ><i class=\"mdi mdi-close-circle text-danger font-22\"></i></td>                                   \n                                  <td name=\"buttons\" class=\"p-0\">\n                                      <div class=\"col-12 m-0\">\n                                          <button id=\"bEdit\" type=\"button\" class=\"btn btn-sm btn-soft-success btn-circle col-6\">\n                                                <router-link :to=\"{ name: 'Service', params: { id: appointment.id } }\">\n                                                    <i class=\"dripicons-pencil text-success\"></i>\n                                                </router-link>\n                                          </button>\n                                          <button id=\"bElim\" type=\"button\" class=\"btn btn-sm btn-soft-danger btn-circle col-6\" onclick=\"rowElim(this);\">\n                                              <i class=\"dripicons-trash\" aria-hidden=\"true\"></i>\n                                          </button>\n                                      </div>\n                                  </td>\n                              </tr>\n                              \n                          </tbody>\n                      </table>   \n\n                    <Pagination  offset=\"10\" />\n\n                  </div><!--end /div-->\n              </div><!--end card-body-->\n          </div><!--end card-->\n      </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Component, Prop, Vue } from 'vue-property-decorator';\nimport FullCalendar from '@fullcalendar/vue';\nimport dayGridPlugin from '@fullcalendar/daygrid';\nimport timeGridPlugin from '@fullcalendar/timegrid';\nimport itLocale from \"@fullcalendar/core/locales/it\";\nimport interactionPlugin from '@fullcalendar/interaction';\nimport { GETAppointments } from \"../memoFly-api/GETAppointments.js\";\nimport Pagination from './common/Pagination.vue';\nimport moment from 'moment';\nimport { Toast } from \"../services/Toast.js\";\n\n\n@Component({\n  components: {\n    Pagination,\n    FullCalendar\n  },\n})\n\nexport default class AppointmentsTable extends Vue {\n  \n    public appointments :any;\n    public dataAppointments :any;\n    public calendarOptions :any;\n    public events :any;\n\n    process(appointments:any){\n\n        return appointments.map((appointment:any)=>{\n\n                let cliente = {\n                    fulname:\"\",\n                    phone:\"\"\n                };\n\n                if(appointment.cliente.name){\n                    cliente.fulname = appointment.cliente.name + \" \"+ appointment.cliente.lastname;\n                    cliente.phone = appointment.cliente.phone;\n                }else{ \n                    cliente.fulname = appointment.cliente;\n                }\n\n                let ora = moment(appointment.inizio).format(\"hh:mm\");\n\n                return { \n\n                    id: appointment.id,\n                    servizio: appointment.servizio,\n                    ora: ora,\n                    start: appointment.inizio,\n                    durata: null,\n                    collaboratore: null,\n                    cliente: cliente,\n                    prenotatoViaWeb: appointment.prenotatoViaWeb\n\n                }\n\n        })\n        \n    }\n\n    calendarEvents(appointments:any){\n\n        return appointments.map((appointment:any)=>{\n\n            let title = appointment.servizio;\n\n            if(appointment.cliente.name){\n                    title += \" - \" + appointment.cliente.name + \" \"+ appointment.cliente.lastname;\n            }else{ \n                title +=  appointment.cliente;\n            }\n\n            return { \n                title: title, \n                start:appointment.inizio\n            }\n\n        });\n\n    }\n\n    data() {\n\n         GETAppointments()\n            .then((appointmentsData:any)=>{\n                this.events = this.calendarEvents(appointmentsData);\n                this.calendarOptions.events = this.events;\n                console.log(\"EVENTS\")\n                console.log(JSON.stringify(this.events));\n                this.appointments = this.process(appointmentsData);\n                this.$root.$emit('dataApi',this.appointments);\n                return this.appointments\n         })\n\n        //dayGridWeek', 'timeGridDay', 'listWeek' \n\n        this.calendarOptions = {\n            plugins: [ timeGridPlugin, dayGridPlugin, interactionPlugin ],\n            locale:itLocale,\n            initialView: 'timeGridDay',\n            dateClick: this.handleDateClick,\n            slotMinTime: \"09:00:00\",\n            slotMaxTime: \"19:00:00\",\n            eventTimeFormat: {\n                hour: 'numeric',\n                minute: '2-digit',\n                hour12: false\n            },\n            slotLabelFormat: {\n                hour: '2-digit',\n                minute: '2-digit',\n                meridiem: false,\n                hour12: false \n            },\n            events: this.events\n        },\n\n\n        this.$root.$on('dataOutput', (data:any) => {\n            this.dataAppointments = data;\n        });\n        \n        return {\n            calendarOptions: this.calendarOptions,\n            events: this.events,\n            appointments: this.appointments,\n            dataAppointments:this.dataAppointments\n        }\n\n        \n        \n    }\n    \n\n    handleDateClick(arg:any) {\n        alert('date click! ' + JSON.stringify(arg))\n    }\n\n\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style lang=\"scss\">\n\n    .fc-col-header,\n    .fc-day{\n        background-color: #F1F5FA;\n    }\n\n    a.fc-col-header-cell-cushion{\n        height: 40px !important;\n        line-height:40px;\n    }\n\n</style>\n"]}]}