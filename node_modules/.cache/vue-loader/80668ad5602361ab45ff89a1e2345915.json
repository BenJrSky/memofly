{"remainingRequest":"/Users/ben/Desktop/BEN/WORKS/FLYIP/VUE/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ben/Desktop/BEN/WORKS/FLYIP/VUE/src/components/common/WordCloud.vue?vue&type=style&index=0&id=01375a97&scoped=true&lang=scss&","dependencies":[{"path":"/Users/ben/Desktop/BEN/WORKS/FLYIP/VUE/src/components/common/WordCloud.vue","mtime":1631826635085},{"path":"/Users/ben/Desktop/BEN/WORKS/FLYIP/VUE/node_modules/css-loader/dist/cjs.js","mtime":1630067778183},{"path":"/Users/ben/Desktop/BEN/WORKS/FLYIP/VUE/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1630067786534},{"path":"/Users/ben/Desktop/BEN/WORKS/FLYIP/VUE/node_modules/postcss-loader/src/index.js","mtime":1630067782236},{"path":"/Users/ben/Desktop/BEN/WORKS/FLYIP/VUE/node_modules/sass-loader/dist/cjs.js","mtime":1630067784914},{"path":"/Users/ben/Desktop/BEN/WORKS/FLYIP/VUE/node_modules/cache-loader/dist/cjs.js","mtime":1630067776591},{"path":"/Users/ben/Desktop/BEN/WORKS/FLYIP/VUE/node_modules/vue-loader/lib/index.js","mtime":1630067786533}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCiN3b3JkLWNsb3VkewogIGhlaWdodDogMTAwdmg7CiAgd2lkdGg6IDEwMHZ3OwogIG1hcmdpbjogMCBhdXRvOwp9Cgo="},{"version":3,"sources":["WordCloud.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmNA;AACA;AACA;AACA;AACA","file":"WordCloud.vue","sourceRoot":"src/components/common","sourcesContent":["<template>\n\n    <div class=\"w-100\">                                            \n       <div id=\"word-cloud\"></div>\n    </div>\n  \n</template>\n\n<script lang=\"ts\">\nimport { Component, Prop, Vue } from 'vue-property-decorator';\n\n@Component\nexport default class WorldCloud extends Vue {\n\n    @Prop() public words!: any;\n\n    public chunks:any = [];\n    public traceCanvasCtx:any;\n    public wordsDown:any;\n\n    public config = {\n          trace: true,\n          spiralResolution: 1,\n          spiralLimit: 360 * 5,\n          lineHeight: 0.8,\n          xWordPadding: 0,\n          yWordPadding: 3,\n          font: \"sans-serif\"\n      };\n\n\n    data(){\n\n      if(!this.words){\n        this.words = \"Nessun dato!\";\n      }\n    \n\n      return{ \n        words: this.words,\n        chunks: this.chunks,\n        traceCanvasCtx: this.traceCanvasCtx,\n        wordsDown: this.wordsDown,\n      }\n    }\n\n    init(){\n\n      if(this.words){\n\n        this.chunks = this.words.split(\" \")\n        .map((word:any)=> {return { word: word, freq:(Math.floor(Math.random() * 50) + 10) }})\n        .sort((a, b)=> { return -1 * (a.freq - b.freq)});\n\n        let cloud = document.getElementById(\"word-cloud\") as any;\n            cloud.style.position = \"relative\";\n            cloud.style.fontFamily = this.config.font;\n\n        let traceCanvas = document.createElement(\"canvas\");\n            traceCanvas.width = cloud.offsetWidth;\n            traceCanvas.height = cloud.offsetHeight;\n        this.traceCanvasCtx = traceCanvas.getContext(\"2d\");\n            cloud.appendChild(traceCanvas);\n\n        const startPoint = {\n            x: cloud.offsetWidth / 2,\n            y: cloud.offsetHeight / 2\n        };\n\n        this.wordsDown = [];\n\n        let createWordObject = (word, freq)=> {\n            let wordContainer = document.createElement(\"div\");\n                wordContainer.style.position = \"absolute\";\n                wordContainer.style.fontSize = freq + \"px\";\n                wordContainer.style.lineHeight = this.config.lineHeight.toString();\n                wordContainer.appendChild(document.createTextNode(word));\n\n            return wordContainer;\n        }\n\n        let placeWord = (word, x, y) => {\n\n            cloud.appendChild(word);\n            word.style.left = x - word.offsetWidth/2 + \"px\";\n            word.style.top = y - word.offsetHeight/2 + \"px\";\n\n            this.wordsDown.push(word.getBoundingClientRect());\n        }\n\n        let trace = (x, y) => {\n            this.traceCanvasCtx.fillRect(x, y, 1, 1);\n        }\n\n        let spiral = (i, callback) =>{\n            let angle = this.config.spiralResolution * i;\n            let x = (1 + angle) * Math.cos(angle);\n            let y = (1 + angle) * Math.sin(angle);\n            return callback ? callback() : null;\n        }\n\n        let intersect = (word, x, y) => {\n            cloud.appendChild(word);    \n            \n            word.style.left = x - word.offsetWidth/2 + \"px\";\n            word.style.top = y - word.offsetHeight/2 + \"px\";\n            \n            var currentWord = word.getBoundingClientRect();\n            \n            cloud.removeChild(word);\n            \n            for(var i = 0; i < this.wordsDown.length; i+=1){\n                let comparisonWord:any= this.wordsDown[i];\n                \n                if(!(currentWord.right + this.config.xWordPadding < comparisonWord.left - this.config.xWordPadding ||\n                    currentWord.left - this.config.xWordPadding > comparisonWord.right + this.config.xWordPadding ||\n                    currentWord.bottom + this.config.yWordPadding < comparisonWord.top - this.config.yWordPadding ||\n                    currentWord.top - this.config.yWordPadding > comparisonWord.bottom + this.config.yWordPadding)){\n                    return true;\n                }\n            }\n            \n            return false;\n        }\n\n        let placeWords = () => {\n            for (var i = 0; i < this.words.length; i += 1) {\n\n                let word = createWordObject(this.words[i].word, this.words[i].freq);\n                let x,y = 0;\n\n                for (var j = 0; j < this.config.spiralLimit; j++) {\n                    if (spiral(j, function() {\n                            if (!intersect(word, startPoint.x + x, startPoint.y + y)) {\n                                placeWord(word, startPoint.x + x, startPoint.y + y);\n                                return true;\n                            }\n                        })) {\n                        break;\n                    }\n                }\n            }\n        };\n\n        let traceSpiral = ()=> {\n    \n            this.traceCanvasCtx.beginPath();\n            \n            if (this.config.trace) {\n                let frame = 1;\n\n                let x,y = 0;\n\n                let animate = ()=> {\n                    spiral(frame, ()=> {\n                        trace(startPoint.x + x, startPoint.y + y);\n                    });\n\n                    frame += 1;\n\n                    if (frame < this.config.spiralLimit) {\n                        window.requestAnimationFrame(animate);\n                    }\n                }\n\n                animate();\n            }\n        };\n\n\n          placeWords();\n          traceSpiral();\n\n      }\n\n\n    }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n    \n\n\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped lang=\"scss\">\n\n    #word-cloud{\n      height: 100vh;\n      width: 100vw;\n      margin: 0 auto;\n    }\n\n</style>\n"]}]}