{"remainingRequest":"/Users/ben/Desktop/BEN/WORKS/FLYIP/VUE/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ben/Desktop/BEN/WORKS/FLYIP/VUE/src/components/ClientsTable.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/ben/Desktop/BEN/WORKS/FLYIP/VUE/src/components/ClientsTable.vue","mtime":1632248241596},{"path":"/Users/ben/Desktop/BEN/WORKS/FLYIP/VUE/node_modules/cache-loader/dist/cjs.js","mtime":1632248233346},{"path":"/Users/ben/Desktop/BEN/WORKS/FLYIP/VUE/node_modules/babel-loader/lib/index.js","mtime":1632248232528},{"path":"/Users/ben/Desktop/BEN/WORKS/FLYIP/VUE/node_modules/ts-loader/index.js","mtime":1632248240050},{"path":"/Users/ben/Desktop/BEN/WORKS/FLYIP/VUE/node_modules/cache-loader/dist/cjs.js","mtime":1632248233346},{"path":"/Users/ben/Desktop/BEN/WORKS/FLYIP/VUE/node_modules/vue-loader/lib/index.js","mtime":1632248240770}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQoNCmltcG9ydCB7IENvbXBvbmVudCwgUHJvcCwgVnVlIH0gZnJvbSAndnVlLXByb3BlcnR5LWRlY29yYXRvcic7DQppbXBvcnQgeyBDbGllbnQgfSBmcm9tICcuLi9zY2hlbWEvY2xhc3Nlcy5qcycNCmltcG9ydCB7IEdFVENsaWVudHMgfSBmcm9tICIuLi9tZW1vRmx5LWFwaS9HRVRDbGllbnRzLmpzIjsNCmltcG9ydCBQYWdpbmF0aW9uIGZyb20gJy4vY29tbW9uL1BhZ2luYXRpb24udnVlJzsNCmltcG9ydCBEaWFsb2cgZnJvbSAnLi9jb21tb24vRGlhbG9nLnZ1ZScNCmltcG9ydCB7IFRvYXN0IH0gZnJvbSAiLi4vc2VydmljZXMvVG9hc3QuanMiOw0KDQpAQ29tcG9uZW50KHsNCiAgY29tcG9uZW50czogew0KICAgIFBhZ2luYXRpb24sDQogICAgRGlhbG9nDQogIH0sDQp9KQ0KDQpleHBvcnQgZGVmYXVsdCBjbGFzcyBDbGllbnRzVGFibGUgZXh0ZW5kcyBWdWUgIHsNCg0KICBwdWJsaWMgY293b3JrZXJzIDphbnk7DQogIHB1YmxpYyBjbGllbnRzIDphbnk7DQoNCg0KICBkYXRhKCkgew0KDQogICAgdGhpcy5pbml0KCk7DQoNCiAgICByZXR1cm4gew0KICAgICAgY293b3JrZXJzOiB0aGlzLmNvd29ya2VycywNCiAgICAgIGNsaWVudHM6IHRoaXMuY2xpZW50cywNCiAgICB9DQoNCiAgfQ0KDQogIGluaXQoKXsNCg0KICAgIEdFVENsaWVudHMoKQ0KICAgICAgLnRoZW4oKHJlc3BvbnNlOiBhbnkpPT57DQogICAgICAgICAgdGhpcy5jbGllbnRzID0gcmVzcG9uc2UuZGF0YTsNCg0KICAgICAgICAgIGlmKHJlc3BvbnNlLnN0YXR1cyA9PSAyMDApew0KDQogICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEuc2VuemFOb21lID0gcmVzcG9uc2UuZGF0YS5zZW56YU5vbWUubWFwKChwZXJzb246IGFueSk9PnsNCg0KICAgICAgICAgICAgICAgICAgICAgIGxldCBjbGllbnQgPSBuZXcgQ2xpZW50Ow0KDQogICAgICAgICAgICAgICAgICAgICAgaWYoJ3Bob25lJyBpbiBwZXJzb24pew0KICAgICAgICAgICAgICAgICAgICAgICAgY2xpZW50Lm5vbWUgPSBwZXJzb24ucGhvbmU7DQogICAgICAgICAgICAgICAgICAgICAgICBjbGllbnQuY29nbm9tZSA9ICIiOw0KICAgICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjbGllbnQ7DQoNCiAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgdGhpcy5jbGllbnRzID0gWy4uLnJlc3BvbnNlLmRhdGEucmVnaXN0cmF0aSwgLi4ucmVzcG9uc2UuZGF0YS5zZW56YU5vbWVdLm1hcCgocGVyc29uOmFueSk9PnsNCg0KICAgICAgICAgICAgICAgICAgbGV0IGNsaWVudCA9IG5ldyBDbGllbnQ7DQoNCiAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGtleSBpbiBwZXJzb24pew0KICAgICAgICAgICAgICAgICAgICAgICAgICBpZihrZXkgaW4gY2xpZW50KXsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGllbnRba2V5XSA9IHBlcnNvbltrZXldOw0KICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNsaWVudDsNCiAgICAgICAgICAgICAgfSk7DQoNCg0KICAgICAgICAgIH0NCiAgICAgICAgICANCg0KICAgICAgICAgIFRvYXN0KHJlc3BvbnNlLHtzdWNjZXNzOiJDbGllbnRpIGNhcmljYXRpIGNvcnJldHRhbWVudGUiLGVycm9yOiJFcnJvcmUgZHVyYW50ZSBpbCBjYXJpY2FtZW50byBkZWkgY2xpZW50aSEifSk7DQogICAgICB9KQ0KDQogIH0NCg0KDQp9DQo="},{"version":3,"sources":["ClientsTable.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;;AAGA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;;;AAGA;AACA;;AAEA;;;AAGA","file":"ClientsTable.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div class=\"d-flex row\">\r\n    <div v-for=\"client in clients\" v-bind:key=\"client\" class=\"col-lg-3 p-3\">\r\n        <div class=\"card h-100\">\r\n          <div class=\"card-body text-center\">\r\n            <div v-if=\"client.id\" class=\"text-right\">\r\n              <a class=\"mr-2\" data-animation=\"bounce\">\r\n                <router-link :to=\"{ name: 'Client', params: { id: client.id } }\">\r\n                  <i class=\"fas fa-edit text-info font-16\"></i>\r\n               </router-link>\r\n              </a>\r\n              \r\n              <a href=\"\">\r\n                <i class=\"fas fa-trash-alt text-danger font-16\"></i>\r\n              </a>\r\n            </div>\r\n            <img v-if=\"!client.id\" src=\"../../public/img/patient-pro.png\" alt=\"\" class=\"rounded-circle mt-5\">\r\n            <img v-if=\"client.id\" src=\"../../public/img/patient-pro.png\" alt=\"\" class=\"rounded-circle mt-3\">\r\n            <h5 class=\"mb1 client-name font-roboto weight-600 size-16\">{{ client.nome + \" \" +client.cognome }}</h5>\r\n            <p class=\"text-center font-roboto weight-400 size-14\">{{ client.telefono || \"---\" }}</p>\r\n            <p class=\"text-center font-roboto weight-400 size-14\">{{ client.email || \"---\" }}</p>\r\n            <button v-if=\"client.id\" class=\"btn btn-sm btn-outline-primary size-12 mt-3\">\r\n               <router-link :to=\"{ name: 'Profile', params: { id: client.id, phone: client.telefono } }\">\r\n                  Vedi il profilo\r\n               </router-link>\r\n            </button>\r\n          </div>\r\n        </div>\r\n    </div>\r\n  </div>\r\n\r\n</template>\r\n\r\n<script lang=\"ts\">\r\n\r\nimport { Component, Prop, Vue } from 'vue-property-decorator';\r\nimport { Client } from '../schema/classes.js'\r\nimport { GETClients } from \"../memoFly-api/GETClients.js\";\r\nimport Pagination from './common/Pagination.vue';\r\nimport Dialog from './common/Dialog.vue'\r\nimport { Toast } from \"../services/Toast.js\";\r\n\r\n@Component({\r\n  components: {\r\n    Pagination,\r\n    Dialog\r\n  },\r\n})\r\n\r\nexport default class ClientsTable extends Vue  {\r\n\r\n  public coworkers :any;\r\n  public clients :any;\r\n\r\n\r\n  data() {\r\n\r\n    this.init();\r\n\r\n    return {\r\n      coworkers: this.coworkers,\r\n      clients: this.clients,\r\n    }\r\n\r\n  }\r\n\r\n  init(){\r\n\r\n    GETClients()\r\n      .then((response: any)=>{\r\n          this.clients = response.data;\r\n\r\n          if(response.status == 200){\r\n\r\n              response.data.senzaNome = response.data.senzaNome.map((person: any)=>{\r\n\r\n                      let client = new Client;\r\n\r\n                      if('phone' in person){\r\n                        client.nome = person.phone;\r\n                        client.cognome = \"\";\r\n                      }\r\n\r\n                      return client;\r\n\r\n              });\r\n\r\n              this.clients = [...response.data.registrati, ...response.data.senzaNome].map((person:any)=>{\r\n\r\n                  let client = new Client;\r\n\r\n                      for(let key in person){\r\n                          if(key in client){\r\n                            client[key] = person[key];\r\n                          }\r\n                      }\r\n\r\n                      return client;\r\n              });\r\n\r\n\r\n          }\r\n          \r\n\r\n          Toast(response,{success:\"Clienti caricati correttamente\",error:\"Errore durante il caricamento dei clienti!\"});\r\n      })\r\n\r\n  }\r\n\r\n\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"]}]}